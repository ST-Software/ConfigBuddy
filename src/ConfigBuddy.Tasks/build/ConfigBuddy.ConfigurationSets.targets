<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <UsingTask TaskName="ConfigBuddyTransformOneProjectConfigurations" AssemblyFile="../tools/ConfigBuddy.Tasks.dll" />
  <UsingTask TaskName="ConfigBuddyTransformAllProjectConfigurations" AssemblyFile="../tools/ConfigBuddy.Tasks.dll" />

  <PropertyGroup>
    <CompileDependsOn>
      TransformProjectConfigurations;
      $(CompileDependsOn);
    </CompileDependsOn>

  </PropertyGroup>
  
  
  <ItemGroup>
    <ProjectCapability Include="TypeScript" />
  </ItemGroup>

  <Target Name="TransformProjectConfigurations" Condition="'$(TransformProjectConfigurations)' == 'true'">
    <Message Importance="high" Text="TransformProjectConfigurations starting..."/>

    <!-- Transform current project config files for deploy -->
    <ConfigBuddyTransformAllProjectConfigurations
      ConfigExtension="$(ConfigBuddyConfigExtension)"
      TemplateExtension="$(ConfigBuddyTemplateExtension)"
      OutputDir="$(ConfigBuddyAllProjectSetsOutputDir)"
      TemplateDir="$(ConfigBuddyTemplateDir)"
      ConfigRoot="$(ConfigBuddyConfigRoot)"
      OutputProjectName="$(ProjectName)"
      Debug="$(ConfigBuddyDebug)"/>

    <Message Importance="high" Text="TransformProjectConfigurations finished"/>
  </Target>

</Project>
